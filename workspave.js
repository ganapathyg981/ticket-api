let test={"data": [
    {
        "id": 1,
        "name": "morning show",
        "start_time": "2022-02-24T23:00:00.000Z",
        "screen_id": 1,
        "movie_id": 1,
        "layout_id": 1,
        "addedON": "2022-04-01T12:21:52.000Z"
    },
    {
        "id": 2,
        "name": "morning show",
        "start_time": "2022-04-04T23:00:00.000Z",
        "screen_id": 1,
        "movie_id": 1,
        "layout_id": 1,
        "addedON": "2022-04-03T06:13:36.000Z"
    },
    {
        "id": 3,
        "name": "morning show",
        "start_time": "2022-04-05T01:00:00.000Z",
        "screen_id": 1,
        "movie_id": 1,
        "layout_id": 1,
        "addedON": "2022-04-03T06:13:40.000Z"
    },
    {
        "id": 4,
        "name": "morning show",
        "start_time": "2022-04-05T04:00:00.000Z",
        "screen_id": 1,
        "movie_id": 1,
        "layout_id": 1,
        "addedON": "2022-04-03T06:13:46.000Z"
    },
    {
        "id": 5,
        "name": "morning show",
        "start_time": "2022-04-05T07:00:00.000Z",
        "screen_id": 1,
        "movie_id": 1,
        "layout_id": 1,
        "addedON": "2022-04-03T06:13:52.000Z"
    },
    {
        "id": 6,
        "name": "morning show",
        "start_time": "2022-04-05T09:00:00.000Z",
        "screen_id": 1,
        "movie_id": 1,
        "layout_id": 1,
        "addedON": "2022-04-03T06:13:58.000Z"
    },
    {
        "id": 7,
        "name": "morning show",
        "start_time": "2022-04-05T09:00:00.000Z",
        "screen_id": 1,
        "movie_id": 2,
        "layout_id": 1,
        "addedON": "2022-04-03T06:14:15.000Z"
    },
    {
        "id": 8,
        "name": "morning show",
        "start_time": "2022-04-05T07:00:00.000Z",
        "screen_id": 1,
        "movie_id": 2,
        "layout_id": 1,
        "addedON": "2022-04-03T06:14:21.000Z"
    },
    {
        "id": 9,
        "name": "morning show",
        "start_time": "2022-04-05T06:00:00.000Z",
        "screen_id": 1,
        "movie_id": 2,
        "layout_id": 1,
        "addedON": "2022-04-03T06:14:29.000Z"
    },
    {
        "id": 10,
        "name": "morning show",
        "start_time": "2022-04-05T03:00:00.000Z",
        "screen_id": 1,
        "movie_id": 2,
        "layout_id": 1,
        "addedON": "2022-04-03T06:14:34.000Z"
    },
    {
        "id": 11,
        "name": "morning show",
        "start_time": "2022-04-05T01:00:00.000Z",
        "screen_id": 1,
        "movie_id": 2,
        "layout_id": 1,
        "addedON": "2022-04-03T06:14:45.000Z"
    },
    {
        "id": 12,
        "name": "morning show",
        "start_time": "2022-04-04T22:00:00.000Z",
        "screen_id": 1,
        "movie_id": 2,
        "layout_id": 1,
        "addedON": "2022-04-03T06:14:48.000Z"
    },
    {
        "id": 13,
        "name": "morning show",
        "start_time": "2022-04-04T22:00:00.000Z",
        "screen_id": 1,
        "movie_id": 3,
        "layout_id": 1,
        "addedON": "2022-04-03T06:15:00.000Z"
    },
    {
        "id": 14,
        "name": "morning show",
        "start_time": "2022-04-05T00:00:00.000Z",
        "screen_id": 1,
        "movie_id": 3,
        "layout_id": 1,
        "addedON": "2022-04-03T06:15:05.000Z"
    },
    {
        "id": 15,
        "name": "morning show",
        "start_time": "2022-04-05T02:00:00.000Z",
        "screen_id": 1,
        "movie_id": 3,
        "layout_id": 1,
        "addedON": "2022-04-03T06:15:12.000Z"
    },
    {
        "id": 16,
        "name": "morning show",
        "start_time": "2022-04-05T05:00:00.000Z",
        "screen_id": 1,
        "movie_id": 3,
        "layout_id": 1,
        "addedON": "2022-04-03T06:15:17.000Z"
    },
    {
        "id": 17,
        "name": "morning show",
        "start_time": "2022-04-05T08:00:00.000Z",
        "screen_id": 1,
        "movie_id": 3,
        "layout_id": 1,
        "addedON": "2022-04-03T06:15:22.000Z"
    },
    {
        "id": 21,
        "name": "morning show",
        "start_time": "2022-04-05T07:00:00.000Z",
        "screen_id": 1,
        "movie_id": 4,
        "layout_id": 1,
        "addedON": "2022-04-03T06:16:10.000Z"
    },
    {
        "id": 18,
        "name": "morning show",
        "start_time": "2022-04-05T08:00:00.000Z",
        "screen_id": 1,
        "movie_id": 5,
        "layout_id": 1,
        "addedON": "2022-04-03T06:15:44.000Z"
    },
    {
        "id": 19,
        "name": "morning show",
        "start_time": "2022-04-05T11:00:00.000Z",
        "screen_id": 1,
        "movie_id": 5,
        "layout_id": 1,
        "addedON": "2022-04-03T06:15:47.000Z"
    }
]}

function theatreShowMapper(inp){
    let output=[];
    let addedMovies= new Set();
    
    for(entity of test.data){
    
      if(addedMovies.has(entity.movie_id)){
                let current=output.filter(element=>{
                    return element.movie_id==entity.movie_id;
                })
                console.log(current);
                current[0].shows.push({show_id:entity.id,show_time:entity.start_time})
      }
      else{
          output.push({
              "movie_id": entity.movie_id,
              "movie_name":entity.movie_name,
              "shows":[{show_id:entity.id,show_time:entity.start_time}]
          })
          addedMovies.add(entity.movie_id)
      }
    }
    return output
    
}
